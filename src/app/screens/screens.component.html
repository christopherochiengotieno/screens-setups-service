<div class="container">

  <div class="row">
    <div class="col-md-4" style="max-width: 290px;">
      <p id="title2">Screens Details</p>
      <div>
        <button [ngClass]="showViewOrAddSection === 'VIEW' ? selectedButton : ''"
                (click)="toggleBetweenAddOrViewClassesSection('VIEW')" style="width: 50%">List
        </button>
        <button [ngClass]="showViewOrAddSection === 'ADD' ? selectedButton : ''"
                (click)="toggleBetweenAddOrViewClassesSection('ADD')" style="width: 50%">Add/Edit
        </button>
      </div>
      <div class="card" style="max-width: 290px;" *ngIf="showViewOrAddSection === 'VIEW' && screens.length > 0">
        <div class="card-body">
          <p-table selectionMode="single" (onRowSelect)="onScreenSelected($event)" [tableStyle]="{'min-width': '100%'}"
                   [value]="screens" styleClass="p-datatable-sm p-datatable-gridlines" [(selection)]="selectedScreen">
            <ng-template pTemplate="header">
              <tr>
                <th>Screens</th>
              </tr>
            </ng-template>
            <ng-template pTemplate="body" let-screen>
              <tr [pSelectableRow]="screen">
                <td>{{screen.screenName}}</td>
              </tr>
            </ng-template>
          </p-table>
        </div>
      </div>
      <div class="card" style="max-width: 290px;" *ngIf="showViewOrAddSection === 'ADD'">
        <div class="card-body">

          <label for="screenSelection">select screen</label>
          <select id="screenSelection" (change)="selectScreen($event)"
                  style="min-height: 30px; width: 220px; text-align: left; padding-left: 5px">
            <option value=""></option>
            <option *ngFor="let screen of screens" value="{{screen.id}}">{{screen.screenName}}</option>
          </select>

          <form [formGroup]="classesForm" (ngSubmit)="saveOrUpdateClass()">
            <label for="id">ID:</label>
            <input id="id" readonly type="number" class="form-control form-control-sm mb-2"
                   formControlName="id">


            <label for="screenName"><span class="required">*</span>Screen Name:</label>
            <input id="screenName" type="text" class="form-control form-control-sm mb-1" formControlName="screenName" required>

            <label for="shortDescription"> <span class="required">*</span>Short Description:</label>
            <input id="shortDescription" type="text" class="form-control form-control-sm mb-2"
                   formControlName="shortDescription"
                   required>

            <label for="description">Description:</label>
            <input id="description" type="text" class="form-control form-control-sm mb-2" formControlName="description">

            <div class="row">
              <div class="col-xl-5">
                <label for="module" class="form-label"><span class="inputtext">Module:</span></label>
              </div>
              <div class="col-xl-7">
                <select id="module" class="form-control form-control-sm mb-1 " formControlName="module">
                  <option value=""></option>
                  <option value="GIS">GIS</option>
                  <option value="BANCA">BANCA</option>
                </select>

              </div>
            </div>
            <br>
            <div class="row action-section">
                <button (click)="clearBtnClicked()" class="btn" id="clear" style="color: #00529B; font-weight: bolder">Clear</button>
                <button class="btn" type="submit" id="save">Save</button>
            </div>
          </form>

        </div>
      </div>
    </div>
    <div class="col-md-8">
      <!-- Modal -->
      <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog"
           aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLongTitle">Fields</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <form>
                <div class="row">
                  <div class="col-xl-6">
                    <div class="row">
                      <div class="col-xl-4">
                        <label class="form-label" for="idInput">Id:</label>
                      </div>
                      <div class="col-xl-8">
                        <input id="idInput" type="text" class="form-control form-control-sm mb-1" formControlName="">
                      </div>
                    </div>
                    <br>
                    <div class="row">
                      <div class="col-xl-4">
                        <label class="form-label" for="nameInput">Name:</label>
                      </div>
                      <div class="col-xl-8">
                        <input id="nameInput" type="text" class="form-control form-control-sm mb-1" formControlName="">
                      </div>
                    </div>
                    <br>
                    <div class="row">
                      <div class="col-xl-4">
                        <label class="form-label" for="labelInput">Label:</label>
                      </div>
                      <div class="col-xl-8">
                        <input id="labelInput" type="text" class="form-control form-control-sm mb-1" formControlName="">
                      </div>
                    </div>
                    <br>
                    <div class="row">
                      <div class="col-xl-4">
                        <label class="form-label" for="typeInput">Type:</label>
                      </div>
                      <div class="col-xl-8">
                        <select id="typeInput" class="form-control form-control-sm mb-1 " formControlName="type">
                          <option value=""></option>
                          <option value="text">text</option>
                          <option value="date">date</option>
                          <option value="number">number</option>
                        </select></div>
                    </div>
                    <br>
                    <div class="row">
                      <div class="col-xl-4">
                        <label class="form-label" for="defaultValueInput">Default Value</label>
                      </div>
                      <div class="col-xl-8">
                        <input id="defaultValueInput" type="text" class="form-control form-control-sm mb-1"
                               formControlName="" required>
                      </div>
                    </div>
                    <br>
                  </div>

                  <div class="col-xl-6">
                    <div class="row">
                      <div class="col-xl-4">
                        <label class="form-label" for="isRequiredInput"><span
                          class="inputtext">Is required:</span></label>
                      </div>
                      <div class="col-xl-8">
                        <select id="isRequiredInput" class="form-control form-control-sm mb-1 " formControlName="type">
                          <option value="Y">Yes</option>
                          <option value="N" selected>No</option>
                        </select></div>
                    </div>
                    <br>
                    <div class="row">
                      <div class="col-xl-4">
                        <label class="form-label" for="placeholderInput"><span
                          class="inputtext">Placeholder:</span></label>
                      </div>
                      <div class="col-xl-8">
                        <input id="placeholderInput" class="form-control form-control-sm mb-1" formControlName="">
                      </div>
                    </div>
                    <br>
                    <div class="row">
                      <div class="col-xl-4">
                        <label class="form-label" for="toolTipInput"><span class="inputtext">Tool tip:</span></label>
                      </div>
                      <div class="col-xl-8">
                        <input id="toolTipInput" class="form-control form-control-sm mb-1" formControlName="">
                      </div>
                    </div>
                    <br>
                    <div class="row">
                      <div class="col-xl-4">
                        <label class="form-label" for="maxInput"><span class="inputtext">Max</span></label>
                      </div>
                      <div class="col-xl-8">
                        <input id="maxInput" type="number" class="form-control form-control-sm mb-1" formControlName="">
                      </div>
                    </div>
                    <br>
                    <div class="row">
                      <div class="col-xl-4">
                        <label class="form-label" for="minInput"><span class="inputtext">Min:</span></label>
                      </div>
                      <div class="col-xl-8">
                        <input id="minInput" type="number" class="form-control form-control-sm mb-1" formControlName="">
                      </div>
                    </div>
                  </div>
                </div>
              </form>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
              <button type="button" class="btn btn-primary">Save changes</button>
            </div>
          </div>
        </div>
      </div>
      <div>

        <div class="card" style="max-width: 100%; margin-top: 45px">
          <div class="card-header">
            <h5>Fields</h5>
            <ul class="nav">
              <li class="nav-item" *ngIf="selectedScreen" >
                <a class="nav-link active" aria-current="page" data-toggle="modal" data-target="#exampleModalCenter">+Add</a>
              </li>
              <li class="nav-item" *ngIf="selectedField">
                <a class="nav-link" data-toggle="modal" data-target="#addModal">Edit</a>
              </li>
              <li class="nav-item" *ngIf="selectedField">
                <a class="nav-link">Delete</a>
              </li>
            </ul>
          </div>
          <div class="card-body" *ngIf="selectedScreen">
            <p-table [value]="selectedScreen.fields" [tableStyle]="{ 'min-width': '50rem' }"
                     styleClass="p-datatable-sm p-datatable-gridlines" selectionMode="single"
                     [(selection)]="selectedField" dataKey="id" (onRowSelect)="onFieldSelected($event)">
              <ng-template pTemplate="header">
                <tr>
                  <th>Label</th>
                  <th>Type</th>
                  <th>Control Name</th>
                  <th style="max-width:100px">Default Value</th>
                  <th style="max-width:100px">Is required</th>
                  <th>Placeholder</th>
                  <th>Tooltip</th>
                  <th>Max</th>
                  <th>Min</th>
                </tr>
              </ng-template>

              <ng-template pTemplate="body" let-field>
                <tr [pSelectableRow]="field">
                  <td style="min-width: 200px">{{field.label}}</td>
                  <td>{{field.type}}</td>
                  <td>{{field.name}}</td>
                  <td>{{field.defaultValue}}</td>
                  <td>{{field.isMandatory}}</td>
                  <td>{{field.placeholder}}</td>
                  <td style="min-width: 200px">{{field.toolTip}}</td>
                  <td>{{field.max}}</td>
                  <td>{{field.min}}</td>
                </tr>
              </ng-template>
            </p-table>
          </div>
        </div>

      </div>
    </div>


  </div>
</div>
